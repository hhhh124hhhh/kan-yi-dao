# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 项目概述

这是一个名为《是男人就砍一刀》的 Pygame 动作游戏，具有解压和爽感体验的特点。游戏采用模块化架构设计，包含玩家系统、AI陪练系统、特效系统和成长机制。

## 开发环境与运行

### 基本要求
- Python 3.x
- Pygame 库

### 运行游戏
```bash
python main.py
```

### 项目架构

```
main.py           # 游戏主循环，事件处理，渲染控制
├─ player.py      # 玩家类：攻击逻辑、经验系统、等级成长
├─ ai_agent.py    # AI陪练：根据玩家状态生成反馈和对白
├─ enemy.py       # 敌人基类：HP系统、受击逻辑（当前为稻草人）
├─ effects.py     # 特效系统：飘字、砍击特效、视觉反馈
```

### 核心设计原则

1. **模块独立性** - 每个模块保持独立，便于单元测试
2. **逻辑与渲染分离** - 游戏逻辑在update阶段执行，渲染在draw阶段
3. **事件集中处理** - 所有输入事件在main.py中统一处理
4. **AI反应机制** - AI根据玩家状态动态生成反馈，增强游戏体验

### 关键游戏机制

- **攻击循环**: 点击 → 命中判定 → 伤害计算 → 特效反馈 → AI反应 → 经验增长
- **升级系统**: 经验累积达到阈值自动升级，提升攻击力
- **AI反馈**: 根据伤害大小、玩家等级等触发不同对白
- **特效系统**: 实时显示伤害数字、砍击效果

### 开发注意事项

- 保持60FPS帧率稳定
- AI输出需要冷却时间，避免刷屏
- 数值计算要统一管理，便于平衡调整
- 特效对象需要生命周期管理，及时清理

### 扩展方向

- 武器系统升级
- 多种敌人类型
- 场景切换机制
- 音效系统
- 存档功能

### 重要配置文件

- `.env.local` - AI服务配置（包含API密钥）
- `cloudbaserc.json` - 云服务配置
- `PRD.MD` - 详细产品需求文档
- `UI.md` - UI设计规范
- `注意事项.md` - 全面开发注意事项清单